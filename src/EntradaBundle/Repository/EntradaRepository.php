<?php

namespace EntradaBundle\Repository;

use Doctrine\ORM\Query\Expr;

/**
 * EntradaRepository
 *
 * This class was generated by the Doctrine ORM. Add your own custom
 * repository methods below.
 */
class EntradaRepository extends \Doctrine\ORM\EntityRepository
{
    public function getAllEntradas()
    {
        $qb = $this->createQueryBuilder('entrada');
        return $qb->select('entrada')
            ->join('LoginBundle\Entity\User',
                'user',Expr\Join::WITH,
                'entrada.user_id = user.id')
            ->where(
                $qb->expr()->eq('user.active',':active')
            )->setParameter('active',1)
            ->getQuery()
            ->getResult();
    }
}
